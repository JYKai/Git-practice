# 깃으로 버전 관리하기
깃에서는 문서를 수정할 때마다 간단한 메모와 함께 수정 내용을 스냅숏으로 찍어서 저장하며, 이를 '버전'이라고 한다.

## 깃 저장소 만들기
1. 깃 초기화하기 -- ```git init```
```
$ mkdir hello-git
$ cd hello-git

$ git init
```
- 깃을 사용할 수 있도록 디렉터리를 초기화한다.
- '.git'이라는 디렉터리가 생기며, 깃을 사용하면서 버전이 저장될 저장소이다.

</br>

## 버전 만들기
### 깃에서 버전이란
문서를 수정하고 저장할 때마다 생기는 것이라고 생각하면 쉽다.  
깃에서 버전을 관리하면 원래 파일 이름은 그대로 유지하면서 파일에서 무엇을 변경했는지를 변경 시점마다 저장할 수 있다.
- 각 버전마다 작업했던 내용을 확인할 수 있고, 그 버전으로 되돌아 갈 수 있다.

</br>

### 스테이지 & 커밋
**작업 트리(working tree)**  
파일 수정, 저장 등의 작업을 하는 디렉터리

**스테이지(stage)**  
버전으로 만들 파일이 대기하는 곳
- 10개의 파일을 수정했는데 4개의 파일만 버전으로 만들려면 4개의 파일만 스테이지로 넘겨주면 된다.

**저장소(repository)**  
스테이지에서 대기하고 있던 파일들을 버전으로 만들어 저장하는 곳

</br>

### 작업 트리에서 Vim으로 문서 수정하기
```git status``` : 깃 상태 확인  
- 파일을 생성하고 변화가 생긴다면 한 번도 버전 관리하지 않은 파일(untracked files)에 변화가 생긴다.

```
$ vim hello.txt
```

</br>

### 수정한 파일을 스테이징하기 -- ```git add```
작업이 이루어진 후에 스테이지에 수정한 파일을 추가하는 과정을 '스테이징(staging)' 또는 '스테이지에 올린다'라고 표현한다.

```
$ git add hello.txt
$ git status
```
- untracked files -> changes to be committed
- hello.txt 파일 앞에 'new file:' 수식어 추가, '새 파일 hello.txt를 커밋할 것이다'라는 뜻이다.

</br>

### 스테이지에 올라온 파일 커밋하기 -- ```git commit```
깃에서는 버전을 만드는 것을 간단히 '커밋(commit)한다'고도 말한다. 커밋할 때는 그 버전에 어떤 변경 사항이 있었는지 확인하기 위해 메세지를 함께 기록해둬야 한다.

```
$ git commit -m "message1"
```
- message1이라는 커밋 메세지와 함께 커밋한다.
```
$ git status
```
- 버전으로 만들 파일이 없고(nothing to commit) 작업 트리도 수정사항 없이 깨끗하다(working tree clean)고 나타난다.

```git log``` : 저장소에 저장된 버전을 확인할 때 사용
- 커밋을 만든 사람, 만든 시간과 커밋 메세지가 함께 나타난다.

</br>

### 스테이징과 커밋 한꺼번에 처리하기 -- ```git commit -am```
commit 명령에 -am 옵션을 사용하면 스테이지에 올리고 커밋하는 과정을 한 번에 처리한다.
- 단, 한 번이라도 커밋한 적이 있는 파일을 다시 커밋할 때만 사용할 수 있다.

</br>
</br>

## 커밋 내용 확인하기

### 커밋 기록 자세히 살펴보기 -- ```git log```
- commit hash : 커밋을 구별하는 아이디
- (HEAD -> main) : 이 버전이 가장 최신이라는 표시

</br>

### 변경 사항 확인하기 -- ```git diff```
작업 트리에 있는 파일과 스테이지에 있는 파일을 비교하거나, 스테이지에 있는 파일과 저장소에 있는 최신 커밋을 비교해서 수정한 파일을 커밋하기 전에 최종적으로 검토할 수 있다.

</br>
</br>

## 버전 만드는 단계마다 파일 상태 알아보기
깃에서는 버전을 만드는 각 단계마다 파일 상태를 다르게 표시한다.  
파일의 상태를 이해하면 이 파일이 버전 관리의 여러 단계 중 어디에 있는지, 그 상태에서 어떤 일을 할 수 있는지 알 수 있다.

### tracked 파일과 untrackted 파일
깃은 한 번이라도 커밋을 한 파일의 수정 여부를 계속 추적한다. = tracked 파일  
한 번도 깃에서 버전 관리를 하지 않은 파일 = untracked 파일

```git log --stat```
- 커밋에 관련된 파일까지 함께 살펴보려면 ```--stat``` 옵션을 사용한다.

> **Tip** .gitignore 파일로 버전 관리에서 제외하기  
> 버전 관리 중인 디렉터리 안에 버전 관리를 하지 않을 특정 파일 또는 디렉터리가 있다면 .gitignore 파일을 만들어 목록을 저장할 수 있다. 버전 관리하지 않을 파일 또는 디렉터리 이름, 파일 확장자를 입력하면 된다.  
> 개인적으로 메모해 놓은 파일, 자동 생성된 swp 파일, 백업 파일 등  
> ```
> mynote.txt
> temp/
> .swp
> ```

</br>

### unmodified, modified, staged 상태
tracked 상태인 파일은 깃 명령으로 파일 상태를 확인하면 현재 작업 트리에 있는지, 스테이지에 있는지 등 더 구체적인 상태를 알려준다.
- 'Changes not stage for commit:'
    - 파일이 수정만 된 modified 상태

```
$ git add .
$ git status
```
- 'Changes to be committed:'
    - 커밋 직전 단계, staged 상태

```
$ git commit -m "change"
$ git status
```
- 수정이 없던 unmodified로 돌아감

> **Tip** 방금 커밋한 메세지 수정하기  
> ```git commit --amend```

</br>
</br>

## 작업 되돌리기
### 작업 트리에서 수정한 파일 되돌리기 -- ```git checkout```
작업 트리에서 수정한 내용을 쉽게 취소할 수 있다. 단, checkout으로 되돌린 내용은 다시 복구할 수 없다.

```
$ git status -- hello.txt
```
- 수정 전으로 되돌아간다.

</br>

### 스테이징 되돌리기 -- ```git reset HEAD 파일 이름```
수정된 파일을 스테이징했을 때, 스테이징을 취소하는 방법

```
$ git reset HEAD hello.txt
```

</br>

### 최신 커밋 되돌리기 -- ```git reset HEAD^```
수정된 파일을 스테이징하고 커밋까지 했을 때, 가장 마지막에 한 커밋을 취소하는 방법